const expect = require('unexpected')
const fs = require('fs')
const getYear = require('./get-year')

const fixture = JSON.parse(fs.readFileSync('./fixtures/vin-to-year.json', 'utf8'))

const skippedVINs = [
  'TRUZZZ8J981024811',
  'WVWZZZ1EZXK000316',
  'TMBCS21Z0AC010124',
  'VSSZZZ5PZ7R044657',
  'WVWZZZAUZEW077061',
  'WAUZZZ8DZYA067869',
  'WAUZZZ8RXDA005871',
  'TMBND26Y623460185',
  'WVWZZZ9NZ7Y194154',
  'WVWZZZ1KZAW301513',
  'TMBZZZAAZED601050',
  'WVWZZZ1JZ2W246410',
  'WVWZZZ1HZTP099707',
  'TMBZZZAAZED606994',
  'WV1ZZZ2FZE7005716',
  'WVWZZZ17ZDW655648',
  'WAUZZZ4E48NO16110',
  'TMBZZZAAZED617181',
  'WVWZZZAAZCD040527',
  'WV2ZZZ7HZ9H013489',
  'TMBJY16Y533838379',
  'WAUZZZ4BZWN173851',
  'WVWZZZ16ZJW339386',
  'WVWZZZ3CZ9E126533',
  'WAUZZZ8T5CA009224',
  'WV2ZZZ70ZPH089063',
  'WAUZZZ8K7AA009813',
  'WVWZZZAUZEP500563',
  'WV3ZZZ70ZYH033943',
  'WVGZZZ1TZ6W056351',
  'TMBZZZAAZED621800',
  'WAUZZZ4F96N007098',
  'WAUZZZ8E8ZA114145',
  'WAUZZZ8E83A014127',
  'WVGZZZ1TZ6W069863',
  'WP0ZZZ99Z3S608461',
  'WVWZZZ1HZPK716104',
  'WUARL48H64K900611',
  'WVGZZZ1TZ5W060700',
  'WVGZZZ7LZ7D065955',
  'WAUZZZ8P2AA028247',
  'WAUZZZ8H18K011971',
  'WP0CA2A9XES140149',
  'WVWZZZ9NZ2D018323',
  'WAUZZZ4F57N015572',
  'WUAZZZ4F9AN900600',
  'WAUZZZ8F4AN001485',
  'WVWZZZ7NZEV028277',
  'WAUZZZ4G3BNO28435',
  'WAUZZZ4LXED014216',
  'WAUZZZ8H35K000871',
  'WP1ZZZ95ZHLB39543',
  'WVWZZZAAZDD050855',
  'WAUZZZ8E03A356784',
  'WV1ZZZ2EZB6001284',
  'WVWZZZAAZFD003275',
  'WVWZZZ16ZJW427723',
  'WAUZZZ4BZWN063437',
  'WV2ZZZ70ZRH078177',
  'WVWZZZ6RZBY081448',
  'WVWZZZAAZED137638',
  'WVGZZZ7PZFD014151',
  'WVWZZZ3CZ8E191949',
  'WV1ZZZ2FZF7001580',
  'WVWZZZ6RZDY213146',
  'WAUZZZ4L7ED017638',
  'WVWZZZ3CZ8E205710',
  'WAUZZZ4E27NO26150',
  'WVWZZZ3CZBP337313',
  'WAUZZZ8PXBA007891',
  'WVGZZZ1TZCW066429',
  'VSSZZZ5FZBR000574',
  'WVWZZZ6KZXR542970',
  'WVWZZZ6NZXY182559',
  'WP1ZZZ92ZBLA82878',
  'WAUZZZ4F88N135609',
  'WVWZZZ3CZCEO16283',
  'WV1ZZZ2KZ5X056882',
  'TMBZZZAAZED619212',
  'WV1ZZZ7JZCXO15234',
  'WVWZZZ1KZ8W068600',
  'WVGZZZ1TZ4W161585',
  'WVWZZZ17ZDW212267',
  'WAUZZZ8K0DA119039',
  'WVWZZZ6EZ2W001371',
  'WV2ZZZ7HZHH121580',
  'WVWZZZ1GZMW233937',
  'TRUZZZ8N621039857',
  'WAUZZZ4L28D021723',
  'WAUZZZ8P0CA013913',
  'WVWZZZ3CZ8E179765',
  'WVWZZZ3CZ7P096411',
  'WAUZZZ4BZWNO11418',
  'WP0ZZZ97ZBL080528',
  'WVWZZZAUZEW111238',
  'TMBZZZAAZED617498',
  'WVWZZZ6NZ1Y336125',
  'WAUZZZ8LZYA105606',
  'WP1AB29P18LA30031',
  'WVWZZZ1HZTW436559',
  'WVGZZZ1TZ5W079576',
  'WVWZZZ1EZSK027223',
  'WAUZZZ8E62A249172',
  'WVWZZZ1JZ3W119154',
  'TMBDS41U688866321',
  'WVWZZZIKZAM632270',
  'WP1ZZZ92Z8LA85403',
  'WV1ZZZ2EZB6016704',
  'WP1ZZZ9PZ5LA07111',
  'WAUZZZ8R0CA008132',
  'WVWZZZAAZFD027288',
  'ZHWGE22T48LA07363',
  'WP1ZZZ95ZHLB35177',
  'WVGZZZ5NZ8W021483',
  'WAUZZZ8H39K000164',
  'WAUZZZ8R0CA118503',
  'WVWZZZAAZDD013617',
  'WUAZZZ4FX8N901491',
  'WVWZZZ1JZ2U555504',
  'TMBZZZAAZED605290',
  'WVWZZZ9CZYM605157',
  'WVWZZZ1JZ1B007497',
  'WVWZZZ1JZYD150371',
  'WVWZZZAAZFD022734',
  'WVWZZZ16ZDW045648',
  'WV2ZZZ7HZ6X015089',
  'WVWZZZ1JZYW215958',
  'WVWZZZ9NZ2Y091696'
]

describe('resolvers/get-year', () => {
  describe('getYear', () => {
    for (let vin in fixture) {
      if (skippedVINs.includes(vin)) {
        xit(`gets model year close to ${fixture[vin]} from ${vin}`)
        continue
      }
      it(`gets model year close to ${fixture[vin]} from ${vin}`, () => {
        expect(getYear({ vin }), 'to be within', fixture[vin] - 1, fixture[vin] + 1)
      })
    }
  })
})
